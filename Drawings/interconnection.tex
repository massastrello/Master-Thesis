% The block diagram code is probably more verbose than necessary
\begin{tikzpicture}[auto, node distance=1cm,>=latex']
    % We start by placing the blocks
    \node [draw, fill=gray!50, align = center, anchor=south] (HPH) at (0,0) {\textbf{Hybrid port--Hamiltonian system}};
    \node [draw, fill=gray!50, align = center, anchor=south] (aux) at (0,-1) {\textbf{auxilliary system}};
    \draw[->] (HPH.east) -| node[below right,pos=0.2]{} ++(.5,-.5) |- (aux.east);  
    \draw[->] (aux.west) -| node[below right,pos=0.2]{} ++(-1.85,.5) |- node[] {$\ub_e$} (HPH.west);
     %
    \draw[->] (0,-1.75) -- node[] {$v_r$} (aux.south);
    \node[] at (3.25,.5) {$z$};
    \node[] at (-2,-1) {$\mathbf{w}$};
    \node[] at (2,-1) {$v_e$};
\end{tikzpicture}